<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Gravatar Hovercards</title>

	<style type="text/css" media="screen"  nonce="<?php echo esc_attr( $csp_style_nonce ?? '' ); ?>">
		body {
			line-height: 1.5;
			-webkit-text-size-adjust: 100%;
			tab-size: 4;
			font-family: Inter var,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;
			font-feature-settings: normal;
			font-variation-settings: normal;
			width: 1024px;
			margin: 0 auto;
			text-align: center;
			margin-top: 50px;
		}

		.hovercard {
			display: flex;
			justify-content: space-between;
			height: 400px;
			width: 800px;
			margin: 0 auto;
			margin-top: 50px;
			border: 1px solid #ddd;
			border-radius: 3px;
			padding: 20px;
			clear: both;
		}

		#profile-copy {
			position: relative !important;
		}

		#profile-copy.hidden {
			display: block !important;
		}
	</style>
  </head>
  <body>
	<h1>Gravatar Hovercard Test Page</h1>
	<div class="hovercard">
		<div class="avatar">
			<img src="https://secure.gravatar.com/avatar/767fc9c115a1b989744c755db47feb60?s=128" class="avatar avatar-128" />
		</div>
		<div class="card">
		</div>
	</div>

    <script src="main.js"></script>

	<script type="text/javascript">
		// Initialize and attach hovercards to all gravatars
		( function() {
			function init() {
				const hovercardHash = '767fc9c115a1b989744c755db47feb60';

				if ( typeof Gravatar === 'undefined' ) {
					return;
				}

				if ( typeof Gravatar.init !== 'function' ) {
					return;
				}

				Gravatar.init();
				Gravatar.copy_card = function( hash ) {
					setTimeout( () => {
						const copy = document.querySelector( '#profile-' + hash ).cloneNode( true );

						copy.id = 'profile-copy';
						copy.classList.remove( 'fade' );

						document.querySelector( '.card' ).appendChild( copy );
						document.querySelector( 'body > .gcard' ).classList.add( 'hidden' );
					}, 50 );
				}
				Gravatar.active_hash = '767fc9c115a1b989744c755db47feb60';
				Gravatar.listen( Gravatar.active_hash, 'copy_card' );
				Gravatar.show_card();
			}

			if ( document.readyState !== 'loading' ) {
				init();
			} else {
				document.addEventListener( 'DOMContentLoaded', init );
			}
		} )();
	</script>
  </body>
</html>
